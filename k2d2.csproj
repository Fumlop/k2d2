<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
	<PropertyGroup>
		<Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
		<Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
		<ProjectGuid>{C0BDE81C-46FF-40A1-B3A1-07E40830115C}</ProjectGuid>
		<OutputType>Library</OutputType>
		<AppDesignerFolder>Properties</AppDesignerFolder>
		<TargetFrameworkVersion>v4.8</TargetFrameworkVersion>
		<FileAlignment>512</FileAlignment>
		<Deterministic>true</Deterministic>
		<AssemblyName>com.github.cfloutier.K2D2</AssemblyName>
		<Product>K2-D2</Product>
		<Description>K2-D2 Description Goes Here</Description>
		<Version>0.8.1</Version>
		<RestoreAdditionalProjectSources>
			https://nuget.spacewarp.org/v3/index.json
		</RestoreAdditionalProjectSources>
		<RootNamespace>K2D2</RootNamespace>
		<ModId Condition="'$(ModId)'==''">K2D2</ModId>
	</PropertyGroup>
	<ItemGroup>
		<PackageReference Include="BepInEx.Analyzers" Version="1.*" PrivateAssets="all" />
		<PackageReference Include="BepInEx.AssemblyPublicizer.MSBuild" Version="0.4.0" PrivateAssets="all" />
		<PackageReference Include="BepInEx.Core" Version="5.*" />
		<PackageReference Include="BepInEx.PluginInfoProps" Version="2.*" />
		<PackageReference Include="HarmonyX" Version="2.10.1" />
		<PackageReference Include="SpaceWarp" Version="1.1.1" />
		<PackageReference Include="UnityEngine.Modules" Version="2020.3.33" IncludeAssets="compile" />
	</ItemGroup>
	<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
		<DebugSymbols>true</DebugSymbols>
		<DebugType>portable</DebugType>
		<Optimize>false</Optimize>
		<OutputPath>bin\Debug\</OutputPath>
		<DefineConstants>DEBUG;TRACE</DefineConstants>
		<ErrorReport>prompt</ErrorReport>
		<WarningLevel>4</WarningLevel>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
		<DebugType>pdbonly</DebugType>
		<Optimize>true</Optimize>
		<OutputPath>bin\Release\</OutputPath>
		<DefineConstants>TRACE</DefineConstants>
		<ErrorReport>prompt</ErrorReport>
		<WarningLevel>4</WarningLevel>
	</PropertyGroup>
	<PropertyGroup>
		<KSP2Path>G:\SteamLibrary\steamapps\common\Kerbal Space Program 2\</KSP2Path>
		<ModName>KSP2FlightAssistant</ModName>
		<ModPath>$(KSP2Path)BepInEx\plugins\$(ModName)</ModPath>
		<FinalModFolder>$(ProjectDir)$(ModName)</FinalModFolder>
	</PropertyGroup>
	<ItemGroup>
		<Reference Include="Assembly-CSharp">
			<HintPath>.\external_dlls\Assembly-CSharp.dll</HintPath>
			<Private>False</Private>
		</Reference>
		<Reference Include="System" />
		<Reference Include="System.Core" />
		<Reference Include="System.Xml.Linq" />
		<Reference Include="System.Data.DataSetExtensions" />
		<Reference Include="Microsoft.CSharp" />
		<Reference Include="System.Data" />
		<Reference Include="System.Net.Http" />
		<Reference Include="System.Xml" />
		<Reference Include="BepInEx">
			<HintPath>.\external_dlls\BepInEx.dll</HintPath>
			<Private>False</Private>
		</Reference>
		<Reference Include="Newtonsoft.Json">
			<HintPath>.\external_dlls\Newtonsoft.Json.dll</HintPath>
			<Private>False</Private>
		</Reference>
		<Reference Include="UnityEngine">
			<HintPath>.\external_dlls\UnityEngine.dll</HintPath>
			<Private>False</Private>
		</Reference>
		<Reference Include="UnityEngine.CoreModule">
			<HintPath>.\external_dlls\UnityEngine.CoreModule.dll</HintPath>
			<Private>False</Private>
		</Reference>
		<Reference Include="UnityEngine.IMGUIModule">
			<HintPath>.\external_dlls\UnityEngine.IMGUIModule.dll</HintPath>
			<Private>False</Private>
		</Reference>
		<Reference Include="UnityEngine.InputLegacyModule">
			<HintPath>.\external_dlls\UnityEngine.InputLegacyModule.dll</HintPath>
			<Private>False</Private>
		</Reference>
    <Reference Include="UnityEngine.TextRenderingModedule">
			<HintPath>.\external_dlls\UnityEngine.TextRenderingModule.dll</HintPath>
			<Private>False</Private>
		</Reference>
  </ItemGroup>
  <ItemGroup>
		<Compile Include="sources\Properties\AssemblyInfo.cs" />
		<Compile Include="sources\**\*.cs" />
	</ItemGroup>
	<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
	<PropertyGroup>
		<PostBuildEvent>

echo on
echo $(TargetDir)

rem taskkill /f /im KSP2_x64.exe
rem timeout 2

cd $(ProjectDir)

echo "ConfigurationName:" $(ConfigurationName)
call make_zip.bat $(ConfigurationName)
call copy_to_ksp.bat

echo "ConfigurationName:" $(ConfigurationName)
call make_zip.bat $(ConfigurationName)

		</PostBuildEvent>
  </PropertyGroup>
</Project>